<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Catálogo · Star Nutrition</title>
<base href="/protein-power-lab/">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet"/>
<style>
:root{--bg:#0b0b0b;--brand:#ff4c4c;--radius:16px;--shadow:0 20px 60px rgba(0,0,0,.55)}
*{box-sizing:border-box;margin:0;padding:0} html,body{height:100%}
body{font-family:'Montserrat',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0b0b0b;color:#fff;display:flex;flex-direction:column}
.bg{position:fixed;inset:0;z-index:-2;background:url('assets/img/bg-texture.jpg') center/cover no-repeat;filter:contrast(1.05) brightness(.55)}
.bg::after{content:"";position:absolute;inset:0;background:
  radial-gradient(1200px 600px at 50% 0, rgba(255,76,76,.25), transparent 60%),
  radial-gradient(1200px 600px at 50% 100%, rgba(0,212,255,.18), transparent 60%),
  linear-gradient(180deg, rgba(0,0,0,.4), rgba(0,0,0,.85));}
header{position:sticky;top:0;z-index:50;background:rgba(12,12,12,.7);backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,.06)}
.nav{max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:16px;padding:14px 20px}
.logo{display:flex;align-items:center;gap:14px;text-decoration:none;color:#fff}
.logo img{height:48px;width:48px;border-radius:12px;object-fit:cover;border:2px solid #222}
.brand{font-weight:800;font-size:1.4rem}
.backbtn{margin-left:auto;display:inline-flex;align-items:center;gap:8px;background:var(--brand);color:#fff;padding:10px 14px;border-radius:12px;text-decoration:none;font-weight:700;box-shadow:0 10px 24px rgba(255,76,76,.25)}
.backbtn:hover{box-shadow:0 16px 34px rgba(255,76,76,.35);transform:translateY(-1px)}
.section{max-width:1200px;margin:20px auto 40px;padding:0 20px}
.titlebar{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.titlebar img{width:56px;height:56px;object-fit:contain;background:#fff;border-radius:12px;border:2px solid #222;padding:6px}
.titlebar h1{font-size:clamp(1.6rem,4vw,2.2rem)}
.subtitle{color:#bdbdbd;margin-top:4px}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin:16px 0 10px}
.search{flex:1 1 260px;display:flex;align-items:center;background:#171717;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:8px 12px}
.search input{all:unset;width:100%;font-size:0.95rem}
.chips{display:flex;gap:8px;flex-wrap:wrap}
.chip{display:inline-flex;align-items:center;gap:8px;background:#171717;border:1px solid rgba(255,255,255,.12);border-radius:999px;padding:8px 12px;font-size:.9rem;cursor:pointer}
.chip input{accent-color:var(--brand)}
.select{background:#171717;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:8px 12px}
.group{margin:18px 0 6px;font-weight:800;font-size:1.15rem;opacity:.95}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:20px}
.card{grid-column:span 12;background:rgba(20,20,20,.9);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;transform:translateY(10px);opacity:0;transition:transform .6s, opacity .6s}
.card.in{transform:translateY(0);opacity:1}
.media{position:relative;background:#fff;border-bottom:1px solid rgba(255,255,255,.06)}
.media img{display:block;width:100%;height:220px;object-fit:contain}
.badge{position:absolute;top:12px;left:12px;background:rgba(0,0,0,.6);padding:6px 10px;border:1px solid rgba(255,255,255,.12);border-radius:999px;font-size:.8rem}
.body{padding:16px} .body h3{font-size:1.05rem;margin-bottom:6px} .body p{color:#d6d6d6}
.price{margin-top:10px;font-weight:800}
.btn{display:inline-block;margin-top:10px;background:linear-gradient(180deg,var(--brand),#e04343);color:#fff;text-decoration:none;padding:10px 14px;border-radius:12px;box-shadow:0 12px 24px rgba(255,255,255,.25)}
.btn:hover{box-shadow:0 16px 34px rgba(255,76,76,.35);transform:translateY(-1px)}
@media(min-width:768px){.card{grid-column:span 6}.media img{height:230px}}
@media(min-width:1200px){.card{grid-column:span 4}.media img{height:230px}}
footer{margin-top:auto;border-top:1px solid rgba(255,255,255,.08);background:rgba(10,10,10,.85)}
.foot{max-width:1200px;margin:0 auto;padding:26px 20px;display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between}
.foot small{color:#bdbdbd} .foot a{color:#fff;text-decoration:none;border-bottom:1px dotted rgba(255,255,255,.25)}
</style>
</head>
<body>
<div class="bg" aria-hidden="true"></div>

<header>
  <nav class="nav">
    <a class="logo" href="index.html">
      <img src="assets/img/logo.jpg" alt="Logo"/>
      <span class="brand">Protein Power Lab</span>
    </a>
    <a class="backbtn" href="index.html">← Volver</a>
  </nav>
</header>

<section class="section">
  <div class="titlebar">
    <img src="assets/img/star.jpg" alt="Star"/>
    <div>
      <h1>Catálogo · Star Nutrition</h1>
      <div class="subtitle">Elegí tu producto y pedilo por WhatsApp.</div>
    </div>
  </div>

  <div class="controls">
    <div class="search"><input id="q" placeholder="Buscar producto o sabor…"/></div>
    <div class="chips" id="chips">
      <label class="chip"><input type="checkbox" value="Creatina" checked/> Creatina</label>
      <label class="chip"><input type="checkbox" value="Proteína" checked/> Proteína</label>
      <label class="chip"><input type="checkbox" value="Pre-entreno" checked/> Pre-entreno</label>
      <label class="chip"><input type="checkbox" value="Multivitamínico" checked/> Multivitamínico</label>
    </div>
    <select class="select" id="sort">
      <option value="peso">Orden: menor → mayor (gramos/caps)</option>
      <option value="abc">Orden: A → Z</option>
    </select>
  </div>

  <div id="wrap"></div>
</section>

<footer>
  <div class="foot">
    <small>© 2025 Protein Power Lab.</small>
    <small>Contacto: <a href="mailto:proteinpowerlab@gmail.com">proteinpowerlab@gmail.com</a></small>
  </div>
</footer>

<script>
const FILES = [
  'Creatina_150g.jpg',
  'Creatina_300g_doypack.jpg',
  'Creatina_300g_pote.jpg',
  'Creatina_500g.jpg',
  'Creatina_1kg.jpg',
  'Whey_Protein_2LB_vainilla_chocolate_frutilla_cookies_banana.jpg',
  'Pump_V8_285g_acai_lima_limon_grape_watermelon.jpg',
  'Pump_3D_Ripped_315g_lemon_strawberry_lemon.jpg',
  'All_in_One_Vitamin_60caps.jpg'
];

const FLAVORS = {
  'Whey_Protein_2LB_vainilla_chocolate_frutilla_cookies_banana.jpg':
    'banana, chocolate, frutilla, cookies, vainilla',
  'Pump_V8_285g_acai_lima_limon_grape_watermelon.jpg':
    'açaí, lima limón, uva, sandía',
  'Pump_3D_Ripped_315g_lemon_strawberry_lemon.jpg':
    'lemon, strawberry lemon'
};

const GROUPS = [
  { name: 'Creatina', test: f => f.toLowerCase().includes('creatina') },
  { name: 'Proteína', test: f => f.toLowerCase().includes('whey') || f.toLowerCase().includes('protein') },
  { name: 'Pre-entreno', test: f => f.toLowerCase().includes('pump') },
  { name: 'Multivitamínico', test: f => f.toLowerCase().includes('vitamin') }
];

function sizeValue(name){
  const n = name.toLowerCase();
  const kg = n.match(/(\d+(?:[\.,]\d+)?)\s*kg/); if(kg) return parseFloat(kg[1].replace(',','.'))*1000;
  const g  = n.match(/(\d+)\s*g/);               if(g)  return parseInt(g[1],10);
  const lb = n.match(/(\d+(?:[\.,]\d+)?)\s*lb/);  if(lb) return parseFloat(lb[1].replace(',','.'))*453.592;
  const caps = n.match(/(\d+)\s*caps/);          if(caps) return parseInt(caps[1],10);
  return Number.POSITIVE_INFINITY;
}

const qEl = document.getElementById('q');
const sortEl = document.getElementById('sort');
const chipsEl = document.getElementById('chips');
const wrap = document.getElementById('wrap');

function activeCats(){
  return [...chipsEl.querySelectorAll('input[type=checkbox]:checked')].map(c=>c.value);
}

function card(file){
  const title = file.replace(/_/g,' ').replace(/\.jpg$/i,'');
  const flavors = FLAVORS[file];
  const shown = flavors ? `${title} (${flavors})` : title;
  const src = 'assets/img/' + encodeURIComponent(file);
  const wa  = 'https://wa.me/541123014207?text=' + encodeURIComponent('Hola! Quiero ' + shown);

  let cat = 'Producto';
  if(GROUPS[0].test(file)) cat='Creatina';
  else if(GROUPS[1].test(file)) cat='Proteína';
  else if(GROUPS[2].test(file)) cat='Pre-entreno';
  else if(GROUPS[3].test(file)) cat='Multivitamínico';

  const desc =
    cat==='Creatina'?'Pura y micronizada.':
    cat==='Proteína'?'Excelente disolución.':
    cat==='Pre-entreno'?'Energía y enfoque.':
    'Vitaminas y minerales clave.';

  return `
    <article class="card" data-animate>
      <div class="media">
        <img src="${src}" alt="${shown}" loading="lazy"/>
        <span class="badge">${cat}</span>
      </div>
      <div class="body">
        <h3>${shown}</h3>
        <p>${desc}</p>
        <div class="price">$ Consultar</div>
        <a class="btn" href="${wa}" target="_blank" rel="noopener">Pedir por WhatsApp</a>
      </div>
    </article>`;
}

function applyFilters(files){
  const text = qEl.value.trim().toLowerCase();
  const cats = new Set(activeCats());
  return files.filter(f=>{
    let cat = GROUPS.find(g=>g.test(f));
    if(!cat || !cats.has(cat.name)) return false;
    const base = f.toLowerCase().replace(/_/g,' ');
    const flav = (FLAVORS[f]||'').toLowerCase();
    return !text || base.includes(text) || flav.includes(text);
  });
}

function render(){
  let html = '';
  const filtered = applyFilters(FILES);
  const sortMode = sortEl.value;

  GROUPS.forEach(group=>{
    let items = filtered.filter(group.test);
    if(!items.length) return;
    items = (sortMode==='abc')
      ? items.sort((a,b)=> a.localeCompare(b))
      : items.sort((a,b)=> sizeValue(a)-sizeValue(b));
    html += `<div class="group">${group.name}</div><div class="grid">${items.map(card).join('')}</div>`;
  });

  wrap.innerHTML = html || '<p style="opacity:.85">No hay resultados con esos filtros.</p>';

  const io = new IntersectionObserver((es)=>{es.forEach(e=>{if(e.isIntersecting){e.target.classList.add('in');io.unobserve(e.target)}})},{threshold:.18});
  wrap.querySelectorAll('[data-animate]').forEach(c=>io.observe(c));
}

[qEl, sortEl].forEach(el=>el.addEventListener('input', render));
chipsEl.addEventListener('change', render);
render();
</script>
</body>
</html>
